<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>UForm</title>

        <link rel="stylesheet" href="http://gsouf.github.io/UForm/css/bootstrap.min.css">
        <link rel="stylesheet" href="http://gsouf.github.io/UForm/css/font-awesome.min.css">
        <link rel="stylesheet" href="http://gsouf.github.io/UForm/css/highlight.dark.css">
        <link rel="stylesheet" href="http://gsouf.github.io/UForm/css/main.css">
    </head>
    <body>

        <header class="navbar navbar-default navbar-fixed-top">

            <a class="navbar-brand" href="http://gsouf.github.io/UForm/">
                UForm
                <small class="hidden-xs hidden-sm">
                    Framework independent form library for php
                </small>
            </a>

                            <a href="https://github.com/gsouf/UForm">
                    <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png">
                </a>
            
        </header>

        <main class="container-fluid">
            <div class="row">

                
                    <nav id="sidebar" class="col-sm-3 col-lg-2" role="navigation">

                        <ul class="nav nav-pills nav-stacked">
                                                            <li class="">
                                    <a href="http://gsouf.github.io/UForm/">
                                        Quick start
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="http://gsouf.github.io/UForm/render/render-engine.html">
                                        Rendering
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="http://gsouf.github.io/UForm/form-construction/csrf-protection.html">
                                        CSRF Protection
                                    </a>
                                </li>
                                                            <li class="active">
                                    <a href="http://gsouf.github.io/UForm/form-construction/file-upload.html">
                                        File Upload
                                    </a>
                                </li>
                                                    </ul>

                    </nav>

                
                <section id="content" class="col-sm-offset-3 col-lg-offset-2 col-sm-9 col-lg-10">
                    <h1 id="file-upload">File Upload</h1>
<p>Html forms allow to send files through http post requests.</p>
<p>UForm builder manages it very well:</p>
<pre><code class="language-php">$builder-&gt;file("someFile", "Some File");</code></pre>
<p>That will render some <a href="http://www.w3.org/TR/html-markup/input.file.html">html input file</a>:</p>
<pre><code class="language-html">&lt;label&gt;Some File&lt;/label&gt;
&lt;input type="file" name="someFile"&gt;</code></pre>
<h2 id="multiple-files-and-accept-type">Multiple files and accept type</h2>
<p>It is possible to add additional controls to the form with
<a href="http://www.w3schools.com/tags/att_input_multiple.asp">multiple</a> and
<a href="http://www.w3schools.com/tags/att_input_accept.asp">accept</a> attributes:</p>
<pre><code class="language-php">$builder-&gt;file("someFile", "Some File", true, ".png,.gif");</code></pre>
<p>The third and fourth parameters are respectively <code>multiple</code> and <code>accept</code> attributes.</p>
<pre><code class="language-html">&lt;label&gt;Some File&lt;/label&gt;
&lt;input type="file" name="someFile" multiple accept=".png,.gif"&gt;</code></pre>
<h2 id="validation">Validation</h2>
<p>By default adding a file from the builder will ensure that the file is either null
or a valid file (with successful upload).
You will have to add the required validator to ensure that the input data is a valid file:</p>
<pre><code class="language-php">$builder-&gt;file("someFile", "Some File")
    -&gt;required();</code></pre>
<h3 id="file-type">File type</h3>
<p>TODO</p>
<h2 id="work-with-the-file">Work with the file</h2>
<p>Php uses to manage files uploads with the global array <code>$_FILES</code>. The structure of <code>$_FILES</code> is not very convenient
and thus UForm translates it to a set of <code>UForm\FileUpload</code> instances.</p>
<h3 id="move-the-file-at-the-good-place">move the file at the good place</h3>
<p>When a file is uploaded it is placed in the temporary directory and will be destroyed when the script exits. If you
want to conserve the file you will have to store it at the place of your convenience:</p>
<pre><code class="language-php">$formContext-&gt;getData()-&gt;findValue("myFile")-&gt;moveTo("uploadDirectory/myfile.png");</code></pre>
<p>This way the file will be moved to <code>uploadDirectory/myfile.png</code>.</p>
<h2 id="about-upload-security">About upload security</h2>
<p>If you import the data with the method <code>$form-&gt;getInputFromGlobals()</code> then
the <a href="http://php.net/manual/fr/function.is-uploaded-file.php">is_uploaded_file</a> check will be processed.</p>
                </section>

            </div>
        </main>

        <footer>
            <div class="container-fluid">
                <p class="text-muted">
                    website generated with <a href="http://couscous.io" title="Markdown website generator">Couscous</a>
                </p>
            </div>
        </footer>

        <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
        <script src="//yastatic.net/highlightjs/8.2/highlight.min.js"></script>

        <script>
            $(function() {
                $("section>h1").wrap('<div class="page-header" />');
                // Syntax highlighting
                hljs.initHighlightingOnLoad();
            });
        </script>

    </body>
</html>
